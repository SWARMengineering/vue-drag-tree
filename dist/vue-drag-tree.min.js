!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("VueDragTree",[],t):"object"==typeof exports?exports.VueDragTree=t():e.VueDragTree=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=16)}([function(e,t,n){e.exports=!n(2)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports={default:n(18),__esModule:!0}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(22);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(8),o=n(6);e.exports=function(e){return r(o(e))}},function(e,t,n){function r(e){o||(n(46),n(45))}var o=!1,i=n(12)(n(14),n(48),r,"data-v-595cdfee",null);i.options.__file="/home/mds-daniel-tara/projects/work/swarm/vue-drag-tree/src/DragNode.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] DragNode.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},function(e,t){e.exports=function(e,t,n,r,o){var i,a=e=e||{},u=typeof e.default;"object"!==u&&"function"!==u||(i=e,a=e.default);var s="function"==typeof a?a.options:a;t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),r&&(s._scopeId=r);var c;if(o?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},s._ssrRegister=c):n&&(c=n),c){var l=s.functional,d=l?s.render:s.beforeCreate;l?s.render=function(e,t){return c.call(t),d(e,t)}:s.beforeCreate=d?[].concat(d,c):[c]}return{esModule:i,exports:a,options:s}}},function(e,t,n){var r=n(12)(n(15),n(47),null,null,null);r.options.__file="/home/mds-daniel-tara/projects/work/swarm/vue-drag-tree/src/VueDragTree.vue",r.esModule&&Object.keys(r.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] VueDragTree.vue: functional components are not supported with templates, they should use render functions."),e.exports=r.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),o=1e3,i=null,a=null,u=void 0,s=null;t.default={name:"DragNode",data:function(){return{isClicked:!1,isHover:!1,styleObj:{opacity:1},willOpen:this.open}},props:{open:{type:Boolean,default:!1},model:Object,allowDrag:{type:Function,default:function(){return!0}},allowDrop:{type:Function,default:function(){return!0}},defaultText:{type:String,default:"New item"},depth:{type:Number,default:0},createChildNodeOnDoubleClick:{type:Boolean,default:!1}},computed:{determineCaret:function(){return this.model&&this.model.children&&this.model.children.length>0&&(this.open||this.willOpen)?["nodeClicked","vue-drag-node-icon"]:["vue-drag-node-icon"]},isFolder:function(){return this.model.children&&this.model.children.length},increaseDepth:function(){return this.depth+1},isDraggable:function(){return this.allowDrag(this.model,this)},computedOpen:{get:function(){return this.willOpen},set:function(e){this.willOpen=e}}},methods:{computeIcon:function(e,t,n){switch(e){case"algorithm":case"bundle":case"capture":case"configuration":case"format":case"optimization":case"organization":return'<i class="sw-'+e+'"></i>';case"process":return'<i class="sw-menu-tree"></i>';case"persona":return'<i class="sw-brain-configuration"></i>';case"asset":return'<i class="sw-cube"></i>';case"dashmodel":return'<i class="sw-grid"></i>';case"constraint":return'<i class="sw-filter"></i>';case"datamodel":return'<i class="sw-data-model"></i>';case"folder":return'<i class="sw-'+(this.computedOpen?"folder-open":"folder")+'"></i>';case"itemref":return'<i class="sw-'+(this.smallItemRef?"link-small":"link")+'"></i>';case"functor":return'<i class="sw-goal-tree"></i>';case"metric":return'<i class="sw-screen-recording"></i>';case"declaration":return'<i class="sw-'+(n&&"declaration.output"===n?"items-list":"parameter")+'"></i>';case"order":return'<i class="sw-timer"></i>';case"codetemplate":return'<i class="sw-templates"></i>';default:return null}},toggle:function(){if(this.isFolder&&(this.willOpen=!this.willOpen),s.emitCurNodeClicked(this.model,this),this.isClicked=!this.isClicked,u!=this.model.id){for(var e=s.$parent,t=[e.$children[0]];0!=t.length;){var n=t.shift();n.isClicked=!1,n.$children&&n.$children.length>0&&(t=t.concat(n.$children))}this.isClicked=!0,u=this.model.id}},changeType:function(){this.createChildNodeOnDoubleClick&&(this.currentHighlight&&(u=this.model.id),this.isFolder||(this.$set(this.model,"children",[]),this.addChild(),this.willOpen=!0,this.isClicked=!0))},mouseOver:function(e){this.isHover=!0},mouseOut:function(e){this.isHover=!1},addChild:function(){this.model.children.push({name:this.defaultText,id:o++})},removeChild:function(e){var t=this.$parent.model.children;for(var n in t)if(t[n].id==e){t=t.splice(n,1);break}},drag:function(e){i=this,s.emitDrag(this.model,this,e)},dragStart:function(e){return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain","asdad"),!0},dragOver:function(e){return e.preventDefault(),s.emitDragOver(this.model,this,e),!0},dragEnter:function(e){this._uid!==i._uid&&(this.styleObj.opacity=.5),s.emitDragEnter(this.model,this,e)},dragLeave:function(e){this.styleObj.opacity=1,s.emitDragLeave(this.model,this,e)},drop:function(e){e.preventDefault(),this.styleObj.opacity=1,this.allowDrop(this.model,this)&&(a=this,n.i(r.a)(s,i,a),s.emitDrop(this.model,this,e))},dragEnd:function(e){s.emitDragEnd(this.model,this,e)}},beforeCreate:function(){this.$options.components.item=n(11)},created:function(){s=n.i(r.b)(this)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n.n(r),i=n(11),a=n.n(i);t.default={name:"VueDragTree",props:{data:Array,allowDrag:{type:Function,default:function(){return!0}},allowDrop:{type:Function,default:function(){return!0}},defaultText:{type:String,default:"新增节点"},depth:{type:Number,default:0},createChildNodeOnDoubleClick:{type:Boolean,default:!1}},computed:{increaseDepth:function(){return this.depth+1},newData:{get:function(){return this.data},set:function(e){for(var t=this.data.length,n=0;n<t;n++)this.data.shift(n);this.data=o()(this.data,e)}}},methods:{emitCurNodeClicked:function(e,t){this.$emit("current-node-clicked",e,t)},emitDrag:function(e,t,n){this.$emit("drag",e,t,n)},emitDragEnter:function(e,t,n){this.$emit("drag-enter",e,t,n)},emitDragLeave:function(e,t,n){this.$emit("drag-leave",e,t,n)},emitDragOver:function(e,t,n){this.$emit("drag-over",e,t,n)},emitDragEnd:function(e,t,n){this.$emit("drag-end",e,t,n)},emitDrop:function(e,t,n){this.$emit("drop",e,t,n)}},components:{DragNode:a.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=n.n(r),i={install:function(e){"undefined"!=typeof window&&window.Vue&&(e=window.Vue),e.component("VueDragTree",o.a)}};t.default=i},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s});var r=n(5),o=n.n(r),i=function(e){for(var t=!1,n=e;!t;){if("vue-drag-tree"===n.$options._componentTag){t=!0;break}n=n.$parent}return n},a=function(e,t){return e.$parent._uid===t._uid},u=function(e,t){for(var n=e.$parent,r=!1,o=!1;!r;)if(n._uid!==t._uid){if(!n.$options._componentTag||"vue-drag-tree"===n.$options._componentTag){r=!0;break}n=n.$parent}else r=!0,o=!0;return o},s=function(e,t,n){if(t._uid!==n._uid){var r=o()({},t.model);if(a(t,n)){var i=n.$parent,s=n.model;if("vue-drag-tree"===i.$options._componentTag)return i.newData.push(r),void(s.children=s.children.filter(function(e){return e.id!==r.id}));var c=i.model;return s.children=s.children.filter(function(e){return e.id!==r.id}),void(c.children=c.children.concat([r]))}if(u(t,n)){var l=t.$parent.model,d=n.model;return l.children=l.children.filter(function(e){return e.id!==r.id}),void(d.children=d.children.concat([r]))}var f=t.$parent.model,p=n.model;"vue-drag-tree"===t.$parent.$options._componentTag?t.$parent.newData=t.$parent.newData.filter(function(e){return e.id!==r.id}):f.children=f.children.filter(function(e){return e.id!==r.id}),p.children?p.children=p.children.concat([r]):p.children=[r]}};String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)}},function(e,t,n){n(44),e.exports=n(1).Object.assign},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(10),o=n(40),i=n(39);e.exports=function(e){return function(t,n,a){var u,s=r(t),c=o(s.length),l=i(a,c);if(e&&n!=n){for(;c>l;)if((u=s[l++])!=u)return!0}else for(;c>l;l++)if((e||l in s)&&s[l]===n)return e||l||0;return!e&&-1}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(19);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(4),o=n(3).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(3),o=n(1),i=n(23),a=n(27),u=n(7),s=function(e,t,n){var c,l,d,f=e&s.F,p=e&s.G,h=e&s.S,m=e&s.P,v=e&s.B,g=e&s.W,y=p?o:o[t]||(o[t]={}),w=y.prototype,_=p?r:h?r[t]:(r[t]||{}).prototype;p&&(n=t);for(c in n)(l=!f&&_&&void 0!==_[c])&&u(y,c)||(d=l?_[c]:n[c],y[c]=p&&"function"!=typeof _[c]?n[c]:v&&l?i(d,r):g&&_[c]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?i(Function.call,d):d,m&&((y.virtual||(y.virtual={}))[c]=d,e&s.R&&w&&!w[c]&&a(w,c,d)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){var r=n(31),o=n(36);e.exports=n(0)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports=!n(0)&&!n(2)(function(){return 7!=Object.defineProperty(n(24)("div"),"a",{get:function(){return 7}}).a})},function(e,t){e.exports=!0},function(e,t,n){"use strict";var r=n(0),o=n(34),i=n(32),a=n(35),u=n(41),s=n(8),c=Object.assign;e.exports=!c||n(2)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=u(e),c=arguments.length,l=1,d=i.f,f=a.f;c>l;)for(var p,h=s(arguments[l++]),m=d?o(h).concat(d(h)):o(h),v=m.length,g=0;v>g;)p=m[g++],r&&!f.call(h,p)||(n[p]=h[p]);return n}:c},function(e,t,n){var r=n(20),o=n(28),i=n(42),a=Object.defineProperty;t.f=n(0)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(7),o=n(10),i=n(21)(!1),a=n(37)("IE_PROTO");e.exports=function(e,t){var n,u=o(e),s=0,c=[];for(n in u)n!=a&&r(u,n)&&c.push(n);for(;t.length>s;)r(u,n=t[s++])&&(~i(c,n)||c.push(n));return c}},function(e,t,n){var r=n(33),o=n(25);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(38)("keys"),o=n(43);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(1),o=n(3),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(29)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(9),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(9),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(6);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(26);r(r.S+r.F,"Object",{assign:n(30)})},function(e,t){},function(e,t){},function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.newData,function(t,r){return[n("drag-node",{key:r,attrs:{createChildNodeOnDoubleClick:e.createChildNodeOnDoubleClick,open:t.open,model:t,allowDrag:e.allowDrag,allowDrop:e.allowDrop,depth:e.increaseDepth,defaultText:e.defaultText}})]})],2)},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dnd-container",style:e.styleObj,attrs:{draggable:e.isDraggable},on:{drag:function(t){return t.stopPropagation(),e.drag.apply(null,arguments)},dragstart:function(t){return t.stopPropagation(),e.dragStart.apply(null,arguments)},dragover:function(t){return t.stopPropagation(),e.dragOver.apply(null,arguments)},dragenter:function(t){return t.stopPropagation(),e.dragEnter.apply(null,arguments)},dragleave:function(t){return t.stopPropagation(),e.dragLeave.apply(null,arguments)},drop:function(t){return t.stopPropagation(),e.drop.apply(null,arguments)},dragend:function(t){return t.stopPropagation(),e.dragEnd.apply(null,arguments)}}},[n("div",{class:{"is-clicked":e.isClicked,"is-hover":e.isHover},on:{click:e.toggle,mouseover:e.mouseOver,mouseout:e.mouseOut,dblclick:e.changeType}},[n("div",{staticClass:"treeNodeText",style:{"padding-left":1.5*(this.depth-1)+"rem"},attrs:{id:e.model.id}},[n("span",{class:e.determineCaret}),e._v(" "),n("div",{staticClass:"text"},[n("span",{staticClass:"spanIcon",domProps:{innerHTML:e._s(e.computeIcon(e.model.subtype,!1,e.model.use_as))}}),e._v(" "),n("span",{class:[e.isClicked?"spanSelectedText":"",e.isHover?"spanUnderlineText":"spanText"]},[e._v(" "+e._s(e.model.name)+" ")])])])]),e._v(" "),e.isFolder?n("div",{directives:[{name:"show",rawName:"v-show",value:e.computedOpen,expression:"computedOpen"}],staticClass:"treeMargin"},e._l(e.model.children,function(t){return n("drag-node",{key:t.id,attrs:{draggable:e.isDraggable,createChildNodeOnDoubleClick:e.createChildNodeOnDoubleClick,open:t.open,allowDrag:e.allowDrag,allowDrop:e.allowDrop,depth:e.increaseDepth,model:t,defaultText:e.defaultText}})}),1):e._e()])},staticRenderFns:[]},e.exports.render._withStripped=!0}])});
//# sourceMappingURL=vue-drag-tree.min.js.map